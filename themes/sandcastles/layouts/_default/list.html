{{ define "main" }}
<div class="post-list-container">
    {{ if .IsHome }}
    <div style="margin-bottom: 50px;">
        <p style="font-size: 1.1em; line-height: 1.6;">This is a searchable archive of all posts from the <a href="https://sandcastlesblog.substack.com">Sandcastles blog</a>. I created this because <strong>Substack's search is terrible</strong> - it's nearly impossible to find old posts there. This archive makes every essay discoverable through Google and preserves them in their entirety with proper formatting.</p>

        <!-- Search box -->
        <div class="search-box" style="margin: 30px 0 40px 0;">
            <div id="search"></div>
        </div>

        <!-- All Essays button-style section header -->
        <a href="{{ (.Site.GetPage "posts").RelPermalink }}" style="text-decoration: none; display: inline-block;">
            <div style="background: #789BF7; color: white; padding: 15px 25px; border-radius: 8px; margin-bottom: 30px; display: inline-block; cursor: pointer; transition: background 0.2s;">
                <h2 style="margin: 0; color: white; font-size: 1.5em; font-weight: 600;">ðŸ“š All Essays</h2>
            </div>
        </a>
    </div>
    {{ else }}
    <!-- Non-home pages (like taxonomy pages) -->
    <h1 style="margin-bottom: 30px; font-size: 1.8em; color: #666;">{{ .Title }}</h1>
    {{ end }}

    <ul class="post-list" id="essays">
        {{ range .Pages }}
        <li class="post-item">
            <h2 class="post-title" style="margin-bottom: 8px;">
                <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            </h2>
            <div class="post-meta" style="margin-bottom: 10px;">{{ .Date.Format "January 2, 2006" }}</div>
            {{ if .Summary }}
            <div class="post-summary">{{ .Summary }}</div>
            {{ end }}
        </li>
        {{ end }}
    </ul>
</div>
{{ end }}
